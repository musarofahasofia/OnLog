import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cna1Z49G.js";import{d as L,U as $,c as g,b as z,e as M,a as V,o as n,l as D,E as e,s as d,I as o,h as i,n as u,L as P,i as j,V as K,W as A}from"./app-B5DR4V91.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-9zzE8snn.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-GF5T73io.js";import"./RovingFocusGroup-B-JhXvcp.js";import"./useForwardExpose-MatfDooA.js";const U={class:"p-6 space-y-6 text-gray-800"},W={class:"rounded-xl shadow overflow-hidden"},F={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},J=["src"],O={class:"text-xl font-semibold"},q={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},G={key:0},Q={key:1},R={key:0,class:"text-red-600"},X={key:1},Y={key:1},Z={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},tt={class:"text-black-600"},et={class:"font-mono"},st={class:"flex flex-col sm:flex-row gap-4"},ot=["disabled"],at=["disabled"],lt={class:"text-center space-y-2"},nt={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},dt={class:"text-lg font-bold"},it={class:"text-lg font-bold"},ut={class:"text-lg font-bold"},yt=L({__name:"Dashboard",setup(pt){var f;(f=document.querySelector('meta[name="csrf-token"]'))==null||f.getAttribute("content");const a=$(),s=g(()=>a.props.attendanceToday),c=g(()=>a.props.summary);a.props.todayDate;const p=a.props.auth.user,m=a.props.userIp;a.props.allowed_ips,console.log(a.props,"attendanceToday");const b=z("");function x(){const l=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"};b.value=new Intl.DateTimeFormat("id-ID",t).format(l)}M(()=>{x(),setInterval(x,1e3)});function v(l){return l.split(".").map(t=>String(Number(t))).join(".")}console.log("Client IP:",m,"Normalized:",a.props.allowed_ips);const r=g(()=>{const l=v(m);return a.props.allowed_ips.some(t=>l.startsWith(v(t.ip_address)))}),y=l=>{A.post("/absen",{type:l},{preserveScroll:!0,onSuccess:()=>{A.reload({only:["attendanceToday","summary"]})},onError:t=>console.error("Absen gagal",t)})},B=[{title:"Profile",href:"/Profile"}];return(l,t)=>(n(),V(H,{breadcrumbs:B},{default:D(()=>{var _,k,h,w,T,I,S,N,C;return[e("div",U,[e("div",W,[e("div",F,[e("img",{src:d(p).photo?`storage/${d(p).photo}`:`https://ui-avatars.com/api/?name=${d(p).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,J),e("h2",O,o(d(p).name),1),t[2]||(t[2]=e("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),e("div",q,[t[7]||(t[7]=e("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(n(),i("div",G,[e("p",null,[t[3]||(t[3]=e("span",{class:"mr-2"}," Masuk : ",-1)),(_=s.value)!=null&&_.clock_in?(n(),i("span",{key:0,class:u({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},o(s.value.clock_in),3)):(n(),i("span",Q," - "))]),e("p",null,[t[4]||(t[4]=e("span",{class:"mr-2"}," Pulang : ",-1)),(k=s.value)!=null&&k.clock_out?(n(),i("span",R,o(s.value.clock_out),1)):(n(),i("span",X," - "))]),e("p",null,[t[5]||(t[5]=e("span",{class:"mr-2"}," Status : ",-1)),e("span",{class:u(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},o(s.value.status),3)])])):(n(),i("div",Y,t[6]||(t[6]=[e("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),e("div",Z,[e("p",tt,o(b.value),1),e("p",null,[t[8]||(t[8]=P("IP: ")),e("span",et,o(d(m)),1)]),e("p",{class:u(r.value?"text-green-600":"text-yellow-600")},o(r.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),e("div",st,[e("button",{onClick:t[0]||(t[0]=E=>y("masuk")),disabled:!r.value||((h=s.value)==null?void 0:h.clock_in),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(w=s.value)!=null&&w.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,ot),e("button",{onClick:t[1]||(t[1]=E=>y("pulang")),disabled:!r.value||((T=s.value)==null?void 0:T.clock_out),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(I=s.value)!=null&&I.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,at)]),e("div",lt,[t[10]||(t[10]=e("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),e("button",nt,[j(d(K),{href:l.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:D(()=>t[9]||(t[9]=[P(" Lihat Selengkapnya ")])),_:1},8,["href"])])]),e("div",rt,[e("div",null,[e("p",dt,o(((S=c.value)==null?void 0:S.presence)??0),1),t[12]||(t[12]=e("p",null,"Total Kehadiran",-1))]),e("div",null,[e("p",it,o(((N=c.value)==null?void 0:N.absence)??0),1),t[13]||(t[13]=e("p",null,"Total Tidak Hadir",-1))]),e("div",null,[e("p",ut,o(((C=c.value)==null?void 0:C.late)??0),1),t[14]||(t[14]=e("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{yt as default};
