import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DxKwcFB3.js";import{d as H,U as L,c as g,b as $,e as M,a as V,o,l as A,E as t,s as r,I as a,h as d,n as u,L as B,i as K,V as U,W as N}from"./app-CWDJ9QC8.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-2o9jCvin.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-4PYmO5AW.js";import"./VisuallyHidden-BZV3jkA_.js";import"./useForwardExpose-SPO8cCNc.js";const W={class:"p-6 space-y-6 text-gray-800"},j={class:"rounded-xl shadow overflow-hidden"},F={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},J=["src"],O={class:"text-xl font-semibold"},q={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},z={key:0},G={key:1},Q={key:0,class:"text-red-600"},R={key:1},X={key:1},Y={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},Z={class:"text-black-600"},tt={class:"font-mono"},et={class:"flex flex-col sm:flex-row gap-4"},st=["disabled"],at=["disabled"],ot={class:"text-center space-y-2"},lt={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},nt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},rt={class:"text-lg font-bold"},dt={class:"text-lg font-bold"},it={class:"text-lg font-bold"},vt=H({__name:"Dashboard",setup(ut){var y;(y=document.querySelector('meta[name="csrf-token"]'))==null||y.getAttribute("content");const l=L(),s=g(()=>l.props.attendanceToday),m=g(()=>l.props.summary);l.props.todayDate;const p=l.props.auth.user,c=l.props.userIp;console.log(l.props,"attendanceToday");const b=$("");function x(){const i=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};b.value=new Intl.DateTimeFormat("id-ID",e).format(i)}M(()=>{x(),setInterval(x,1e3)});const n=g(()=>c.startsWith("100.64.")||c.startsWith("100.")||c==="kantor-static-ip"),v=i=>{N.post("/absen",{type:i},{preserveScroll:!0,onSuccess:()=>{N.reload({only:["attendanceToday","summary"]})},onError:e=>console.error("Absen gagal",e)})},P=[{title:"Profile",href:"/Profile"}];return(i,e)=>(o(),V(E,{breadcrumbs:P},{default:A(()=>{var f,k,_,h,w,T,S,D,I;return[t("div",W,[t("div",j,[t("div",F,[t("img",{src:r(p).photo?`storage/${r(p).photo}`:`https://ui-avatars.com/api/?name=${r(p).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,J),t("h2",O,a(r(p).name),1),e[2]||(e[2]=t("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),t("div",q,[e[7]||(e[7]=t("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(o(),d("div",z,[t("p",null,[e[3]||(e[3]=t("span",{class:"mr-2"}," Masuk : ",-1)),(f=s.value)!=null&&f.clock_in?(o(),d("span",{key:0,class:u({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},a(s.value.clock_in),3)):(o(),d("span",G," - "))]),t("p",null,[e[4]||(e[4]=t("span",{class:"mr-2"}," Pulang : ",-1)),(k=s.value)!=null&&k.clock_out?(o(),d("span",Q,a(s.value.clock_out),1)):(o(),d("span",R," - "))]),t("p",null,[e[5]||(e[5]=t("span",{class:"mr-2"}," Status : ",-1)),t("span",{class:u(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},a(s.value.status),3)])])):(o(),d("div",X,e[6]||(e[6]=[t("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),t("div",Y,[t("p",Z,a(b.value),1),t("p",null,[e[8]||(e[8]=B("IP: ",-1)),t("span",tt,a(r(c)),1)]),t("p",{class:u(n.value?"text-green-600":"text-yellow-600")},a(n.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),t("div",et,[t("button",{onClick:e[0]||(e[0]=C=>v("masuk")),disabled:!n.value||((_=s.value)==null?void 0:_.clock_in),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!n.value||(h=s.value)!=null&&h.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,st),t("button",{onClick:e[1]||(e[1]=C=>v("pulang")),disabled:!n.value||((w=s.value)==null?void 0:w.clock_out),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!n.value||(T=s.value)!=null&&T.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,at)]),t("div",ot,[e[10]||(e[10]=t("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),t("button",lt,[K(r(U),{href:i.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:A(()=>e[9]||(e[9]=[B(" Lihat Selengkapnya ",-1)])),_:1,__:[9]},8,["href"])])]),t("div",nt,[t("div",null,[t("p",rt,a(((S=m.value)==null?void 0:S.presence)??0),1),e[12]||(e[12]=t("p",null,"Total Kehadiran",-1))]),t("div",null,[t("p",dt,a(((D=m.value)==null?void 0:D.absence)??0),1),e[13]||(e[13]=t("p",null,"Total Tidak Hadir",-1))]),t("div",null,[t("p",it,a(((I=m.value)==null?void 0:I.late)??0),1),e[14]||(e[14]=t("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{vt as default};
