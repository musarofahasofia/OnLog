import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-VnYCLs4U.js";import{d as $,U as M,c as m,b as V,e as j,a as z,o as n,l as A,E as e,s as d,I as o,h as i,n as u,L as B,i as K,V as U,W as C}from"./app-DIPnzZDV.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DmOuGsTU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dyx9oMCY.js";import"./VisuallyHidden-D8KOAQYY.js";import"./useForwardExpose-DS-gyPV9.js";const F={class:"p-6 space-y-6 text-gray-800"},J={class:"rounded-xl shadow overflow-hidden"},O={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},W=["src"],q={class:"text-xl font-semibold"},G={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},Q={key:0},R={key:1},X={key:0,class:"text-red-600"},Y={key:1},Z={key:1},tt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},et={class:"text-black-600"},st={class:"font-mono"},ot={class:"flex flex-col sm:flex-row gap-4"},at=["disabled"],lt=["disabled"],nt={class:"text-center space-y-2"},rt={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},dt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},it={class:"text-lg font-bold"},ut={class:"text-lg font-bold"},pt={class:"text-lg font-bold"},ft=$({__name:"Dashboard",setup(ct){var f;(f=document.querySelector('meta[name="csrf-token"]'))==null||f.getAttribute("content");const l=M(),s=m(()=>l.props.attendanceToday),c=m(()=>l.props.summary);l.props.todayDate;const p=l.props.auth.user,g=l.props.userIp,P=l.props.allowed_ips;console.log(l.props,"attendanceToday");const b=V("");function x(){const a=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"};b.value=new Intl.DateTimeFormat("id-ID",t).format(a)}j(()=>{x(),setInterval(x,1e3)});function v(a){return a.split(".").map(t=>String(Number(t))).join(".")}const r=m(()=>{const a=v(g);return P.some(t=>a.startsWith(v(t.ip_address)))}),y=a=>{C.post("/absen",{type:a},{preserveScroll:!0,onSuccess:()=>{C.reload({only:["attendanceToday","summary"]})},onError:t=>console.error("Absen gagal",t)})},E=[{title:"Profile",href:"/Profile"}];return(a,t)=>(n(),z(L,{breadcrumbs:E},{default:A(()=>{var _,k,h,w,T,I,S,D,N;return[e("div",F,[e("div",J,[e("div",O,[e("img",{src:d(p).photo?`storage/${d(p).photo}`:`https://ui-avatars.com/api/?name=${d(p).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,W),e("h2",q,o(d(p).name),1),t[2]||(t[2]=e("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),e("div",G,[t[7]||(t[7]=e("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(n(),i("div",Q,[e("p",null,[t[3]||(t[3]=e("span",{class:"mr-2"}," Masuk : ",-1)),(_=s.value)!=null&&_.clock_in?(n(),i("span",{key:0,class:u({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},o(s.value.clock_in),3)):(n(),i("span",R," - "))]),e("p",null,[t[4]||(t[4]=e("span",{class:"mr-2"}," Pulang : ",-1)),(k=s.value)!=null&&k.clock_out?(n(),i("span",X,o(s.value.clock_out),1)):(n(),i("span",Y," - "))]),e("p",null,[t[5]||(t[5]=e("span",{class:"mr-2"}," Status : ",-1)),e("span",{class:u(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},o(s.value.status),3)])])):(n(),i("div",Z,t[6]||(t[6]=[e("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),e("div",tt,[e("p",et,o(b.value),1),e("p",null,[t[8]||(t[8]=B("IP: ",-1)),e("span",st,o(d(g)),1)]),e("p",{class:u(r.value?"text-green-600":"text-yellow-600")},o(r.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),e("div",ot,[e("button",{onClick:t[0]||(t[0]=H=>y("masuk")),disabled:!r.value||((h=s.value)==null?void 0:h.clock_in),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(w=s.value)!=null&&w.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,at),e("button",{onClick:t[1]||(t[1]=H=>y("pulang")),disabled:!r.value||((T=s.value)==null?void 0:T.clock_out),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(I=s.value)!=null&&I.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,lt)]),e("div",nt,[t[10]||(t[10]=e("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),e("button",rt,[K(d(U),{href:a.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:A(()=>t[9]||(t[9]=[B(" Lihat Selengkapnya ",-1)])),_:1,__:[9]},8,["href"])])]),e("div",dt,[e("div",null,[e("p",it,o(((S=c.value)==null?void 0:S.presence)??0),1),t[12]||(t[12]=e("p",null,"Total Kehadiran",-1))]),e("div",null,[e("p",ut,o(((D=c.value)==null?void 0:D.absence)??0),1),t[13]||(t[13]=e("p",null,"Total Tidak Hadir",-1))]),e("div",null,[e("p",pt,o(((N=c.value)==null?void 0:N.late)??0),1),t[14]||(t[14]=e("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{ft as default};
