import{_ as W,b as j,c as F,d as K,e as z,f as G,g as J,U as O,h as q,i as Q,j as R,k as X,l as Y,m as Z}from"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DQINkQ96.js";import{d as f,h as i,o as d,i as o,m as h,l,s as a,V as H,G as ee,a as x,U,y as te,I as r,c as v,b as se,e as ae,E as e,n as _,L as P,W as E}from"./app-FNGSA9qJ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-01GCdtDT.js";import"./RovingFocusGroup-BSPPnA6v.js";import"./useForwardExpose-DTChRX7v.js";const oe=f({__name:"AppSidebarAdmin",setup(g){const n=[{title:"Dashboard",href:"/admin/dashboard",icon:O}];return(s,p)=>(d(),i(ee,null,[o(a(R),{collapsible:"icon",variant:"inset"},{default:l(()=>[o(a(W),null,{default:l(()=>[o(a(j),null,{default:l(()=>[o(a(F),null,{default:l(()=>[o(a(K),{size:"lg","as-child":""},{default:l(()=>[o(a(H),{href:s.route("admin.dashboard")},{default:l(()=>[o(z)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1}),o(a(G),null,{default:l(()=>[o(J,{items:n})]),_:1}),o(a(q),null,{default:l(()=>[o(Q)]),_:1})]),_:1}),h(s.$slots,"default")],64))}}),ne=f({__name:"AdminAppSidebarLayout",props:{breadcrumbs:{default:()=>[]}},setup(g){return(n,s)=>(d(),x(X,{variant:"sidebar"},{default:l(()=>[o(oe),o(Y,{variant:"sidebar"},{default:l(()=>[o(Z,{breadcrumbs:n.breadcrumbs},null,8,["breadcrumbs"]),h(n.$slots,"default")]),_:3})]),_:3}))}}),le={key:0,class:"p-4 text-green-700 bg-green-100 rounded"},re=f({__name:"AdminAppLayout",props:{breadcrumbs:{default:()=>[]}},setup(g){const n=U();return(s,p)=>(d(),x(ne,{breadcrumbs:s.breadcrumbs},{default:l(()=>{var u;return[h(s.$slots,"default"),(u=a(n).props.flash)!=null&&u.message?(d(),i("div",le,r(a(n).props.flash.message),1)):te("",!0)]}),_:3},8,["breadcrumbs"]))}}),de={class:"p-6 space-y-6 text-gray-800"},ie={class:"rounded-xl shadow overflow-hidden"},ue={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},ce=["src"],pe={class:"text-xl font-semibold"},me={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},_e={key:0},be={key:1},fe={key:0,class:"text-red-600"},ge={key:1},ve={key:1},he={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},xe={class:"text-black-600"},ye={class:"font-mono"},ke={class:"flex flex-col sm:flex-row gap-4"},we=["disabled"],$e=["disabled"],Te={class:"text-center space-y-2"},Ae={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},Se={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},De={class:"text-lg font-bold"},Ie={class:"text-lg font-bold"},Ne={class:"text-lg font-bold"},He=f({__name:"Dashboard",setup(g){var $;($=document.querySelector('meta[name="csrf-token"]'))==null||$.getAttribute("content");const n=U(),s=v(()=>n.props.attendanceToday),p=v(()=>n.props.summary);n.props.todayDate;const u=n.props.auth.user,b=n.props.userIp;console.log(n.props,"attendanceToday");const y=se("");function k(){const m=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"};y.value=new Intl.DateTimeFormat("id-ID",t).format(m)}ae(()=>{k(),setInterval(k,1e3)});const c=v(()=>b.startsWith("172.29.")||b.startsWith("10.")||b==="kantor-static-ip"),w=m=>{E.post("/absen",{type:m},{preserveScroll:!0,onSuccess:()=>{E.reload({only:["attendanceToday","summary"]})},onError:t=>console.error("Absen gagal",t)})},V=[{title:"Profile",href:"/Profile"}];return(m,t)=>(d(),x(re,{breadcrumbs:V},{default:l(()=>{var T,A,S,D,I,N,B,C,L;return[e("div",de,[e("div",ie,[e("div",ue,[e("img",{src:a(u).photo?`storage/${a(u).photo}`:`https://ui-avatars.com/api/?name=${a(u).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,ce),e("h2",pe,r(a(u).name),1),t[2]||(t[2]=e("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),e("div",me,[t[7]||(t[7]=e("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(d(),i("div",_e,[e("p",null,[t[3]||(t[3]=e("span",{class:"mr-2"}," Masuk : ",-1)),(T=s.value)!=null&&T.clock_in?(d(),i("span",{key:0,class:_({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},r(s.value.clock_in),3)):(d(),i("span",be," - "))]),e("p",null,[t[4]||(t[4]=e("span",{class:"mr-2"}," Pulang : ",-1)),(A=s.value)!=null&&A.clock_out?(d(),i("span",fe,r(s.value.clock_out),1)):(d(),i("span",ge," - "))]),e("p",null,[t[5]||(t[5]=e("span",{class:"mr-2"}," Status : ",-1)),e("span",{class:_(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},r(s.value.status),3)])])):(d(),i("div",ve,t[6]||(t[6]=[e("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),e("div",he,[e("p",xe,r(y.value),1),e("p",null,[t[8]||(t[8]=P("IP: ")),e("span",ye,r(a(b)),1)]),e("p",{class:_(c.value?"text-green-600":"text-yellow-600")},r(c.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),e("div",ke,[e("button",{onClick:t[0]||(t[0]=M=>w("masuk")),disabled:!c.value||((S=s.value)==null?void 0:S.clock_in),class:_(["rounded-xl px-4 py-2 font-semibold shadow",!c.value||(D=s.value)!=null&&D.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,we),e("button",{onClick:t[1]||(t[1]=M=>w("pulang")),disabled:!c.value||((I=s.value)==null?void 0:I.clock_out),class:_(["rounded-xl px-4 py-2 font-semibold shadow",!c.value||(N=s.value)!=null&&N.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,$e)]),e("div",Te,[t[10]||(t[10]=e("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),e("button",Ae,[o(a(H),{href:m.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:l(()=>t[9]||(t[9]=[P(" Lihat Selengkapnya ")])),_:1},8,["href"])])]),e("div",Se,[e("div",null,[e("p",De,r(((B=p.value)==null?void 0:B.presence)??0),1),t[12]||(t[12]=e("p",null,"Total Kehadiran",-1))]),e("div",null,[e("p",Ie,r(((C=p.value)==null?void 0:C.absence)??0),1),t[13]||(t[13]=e("p",null,"Total Tidak Hadir",-1))]),e("div",null,[e("p",Ne,r(((L=p.value)==null?void 0:L.late)??0),1),t[14]||(t[14]=e("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{He as default};
