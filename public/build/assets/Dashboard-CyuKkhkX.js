import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DFmlWJpJ.js";import{d as H,U as L,c as m,b as $,e as M,a as V,o as n,l as A,E as t,s as d,I as o,h as i,n as u,L as B,i as K,V as U,W as C}from"./app-CXR2WVZ5.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-RuPOkpUp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CBnG8j-x.js";import"./RovingFocusGroup-Dfb-OVfT.js";import"./useForwardExpose-Djt8LXGt.js";const W={class:"p-6 space-y-6 text-gray-800"},j={class:"rounded-xl shadow overflow-hidden"},z={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},F=["src"],J={class:"text-xl font-semibold"},O={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},q={key:0},G={key:1},Q={key:0,class:"text-red-600"},R={key:1},X={key:1},Y={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},Z={class:"text-black-600"},tt={class:"font-mono"},et={class:"flex flex-col sm:flex-row gap-4"},st=["disabled"],ot=["disabled"],at={class:"text-center space-y-2"},lt={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},nt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},rt={class:"text-lg font-bold"},dt={class:"text-lg font-bold"},it={class:"text-lg font-bold"},vt=H({__name:"Dashboard",setup(ut){var y;(y=document.querySelector('meta[name="csrf-token"]'))==null||y.getAttribute("content");const a=L(),s=m(()=>a.props.attendanceToday),c=m(()=>a.props.summary);a.props.todayDate;const p=a.props.auth.user,g=a.props.userIp;a.props.allowed_ips,console.log(a.props,"attendanceToday");const b=$("");function x(){const l=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};b.value=new Intl.DateTimeFormat("id-ID",e).format(l)}M(()=>{x(),setInterval(x,1e3)});const r=m(()=>{const l=g;return a.props.allowed_ips.some(e=>l.startsWith(e.ip_address))}),v=l=>{C.post("/absen",{type:l},{preserveScroll:!0,onSuccess:()=>{C.reload({only:["attendanceToday","summary"]})},onError:e=>console.error("Absen gagal",e)})},N=[{title:"Profile",href:"/Profile"}];return(l,e)=>(n(),V(E,{breadcrumbs:N},{default:A(()=>{var f,_,k,h,w,T,S,I,D;return[t("div",W,[t("div",j,[t("div",z,[t("img",{src:d(p).photo?`storage/${d(p).photo}`:`https://ui-avatars.com/api/?name=${d(p).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,F),t("h2",J,o(d(p).name),1),e[2]||(e[2]=t("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),t("div",O,[e[7]||(e[7]=t("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(n(),i("div",q,[t("p",null,[e[3]||(e[3]=t("span",{class:"mr-2"}," Masuk : ",-1)),(f=s.value)!=null&&f.clock_in?(n(),i("span",{key:0,class:u({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},o(s.value.clock_in),3)):(n(),i("span",G," - "))]),t("p",null,[e[4]||(e[4]=t("span",{class:"mr-2"}," Pulang : ",-1)),(_=s.value)!=null&&_.clock_out?(n(),i("span",Q,o(s.value.clock_out),1)):(n(),i("span",R," - "))]),t("p",null,[e[5]||(e[5]=t("span",{class:"mr-2"}," Status : ",-1)),t("span",{class:u(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},o(s.value.status),3)])])):(n(),i("div",X,e[6]||(e[6]=[t("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),t("div",Y,[t("p",Z,o(b.value),1),t("p",null,[e[8]||(e[8]=B("IP: ")),t("span",tt,o(d(g)),1)]),t("p",{class:u(r.value?"text-green-600":"text-yellow-600")},o(r.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),t("div",et,[t("button",{onClick:e[0]||(e[0]=P=>v("masuk")),disabled:!r.value||((k=s.value)==null?void 0:k.clock_in),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(h=s.value)!=null&&h.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,st),t("button",{onClick:e[1]||(e[1]=P=>v("pulang")),disabled:!r.value||((w=s.value)==null?void 0:w.clock_out),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(T=s.value)!=null&&T.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,ot)]),t("div",at,[e[10]||(e[10]=t("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),t("button",lt,[K(d(U),{href:l.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:A(()=>e[9]||(e[9]=[B(" Lihat Selengkapnya ")])),_:1},8,["href"])])]),t("div",nt,[t("div",null,[t("p",rt,o(((S=c.value)==null?void 0:S.presence)??0),1),e[12]||(e[12]=t("p",null,"Total Kehadiran",-1))]),t("div",null,[t("p",dt,o(((I=c.value)==null?void 0:I.absence)??0),1),e[13]||(e[13]=t("p",null,"Total Tidak Hadir",-1))]),t("div",null,[t("p",it,o(((D=c.value)==null?void 0:D.late)??0),1),e[14]||(e[14]=t("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{vt as default};
