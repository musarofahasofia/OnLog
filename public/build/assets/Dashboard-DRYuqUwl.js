import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-D7qxFnO8.js";import{d as L,U as $,c as m,b as M,e as V,a as K,o as n,l as A,E as t,s as d,I as o,h as i,n as u,L as B,i as U,V as j,W as N}from"./app-DelNaK1H.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-2Bs9BNhN.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cyd55rkx.js";import"./VisuallyHidden-JKL-FLpf.js";import"./useForwardExpose-CtUpoDyr.js";const F={class:"p-6 space-y-6 text-gray-800"},J={class:"rounded-xl shadow overflow-hidden"},O={class:"p-6 flex flex-col items-center text-center text-white",style:{"background-color":"#7C81AD"}},W=["src"],q={class:"text-xl font-semibold"},z={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},G={key:0},Q={key:1},R={key:0,class:"text-red-600"},X={key:1},Y={key:1},Z={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 space-y-2"},tt={class:"text-black-600"},et={class:"font-mono"},st={class:"flex flex-col sm:flex-row gap-4"},ot=["disabled"],at=["disabled"],lt={class:"text-center space-y-2"},nt={class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 grid grid-cols-3 gap-4 text-center"},dt={class:"text-lg font-bold"},it={class:"text-lg font-bold"},ut={class:"text-lg font-bold"},yt=L({__name:"Dashboard",setup(pt){var y;(y=document.querySelector('meta[name="csrf-token"]'))==null||y.getAttribute("content");const a=$(),s=m(()=>a.props.attendanceToday),c=m(()=>a.props.summary);a.props.todayDate;const p=a.props.auth.user,g=a.props.userIp,P=a.props.allowed_ips;console.log(a.props,"attendanceToday");const b=M("");function x(){const l=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};b.value=new Intl.DateTimeFormat("id-ID",e).format(l)}V(()=>{x(),setInterval(x,1e3)});const r=m(()=>P.some(l=>g.value.startsWith(l))),v=l=>{N.post("/absen",{type:l},{preserveScroll:!0,onSuccess:()=>{N.reload({only:["attendanceToday","summary"]})},onError:e=>console.error("Absen gagal",e)})},C=[{title:"Profile",href:"/Profile"}];return(l,e)=>(n(),K(H,{breadcrumbs:C},{default:A(()=>{var f,_,k,h,w,T,S,I,D;return[t("div",F,[t("div",J,[t("div",O,[t("img",{src:d(p).photo?`storage/${d(p).photo}`:`https://ui-avatars.com/api/?name=${d(p).name}`,alt:"Foto Profil",class:"w-32 h-32 rounded-full object-cover border-4 border-white mb-2"},null,8,W),t("h2",q,o(d(p).name),1),e[2]||(e[2]=t("p",{class:"text-sm opacity-90"},"Manajer",-1))])]),t("div",z,[e[7]||(e[7]=t("h3",{class:"font-semibold text-lg"},"Status Hari Ini",-1)),s.value?(n(),i("div",G,[t("p",null,[e[3]||(e[3]=t("span",{class:"mr-2"}," Masuk : ",-1)),(f=s.value)!=null&&f.clock_in?(n(),i("span",{key:0,class:u({"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat"})},o(s.value.clock_in),3)):(n(),i("span",Q," - "))]),t("p",null,[e[4]||(e[4]=t("span",{class:"mr-2"}," Pulang : ",-1)),(_=s.value)!=null&&_.clock_out?(n(),i("span",R,o(s.value.clock_out),1)):(n(),i("span",X," - "))]),t("p",null,[e[5]||(e[5]=t("span",{class:"mr-2"}," Status : ",-1)),t("span",{class:u(["font-bold",{"text-green-600":s.value.status==="Hadir","text-yellow-600":s.value.status==="Terlambat","text-red-600":s.value.status==="Tidak Hadir"}])},o(s.value.status),3)])])):(n(),i("div",Y,e[6]||(e[6]=[t("p",{class:"text-red-600"},"Belum ada absen hari ini",-1)])))]),t("div",Z,[t("p",tt,o(b.value),1),t("p",null,[e[8]||(e[8]=B("IP: ",-1)),t("span",et,o(d(g)),1)]),t("p",{class:u(r.value?"text-green-600":"text-yellow-600")},o(r.value?"Jaringan kantor!":"Jaringan di luar kantor!"),3)]),t("div",st,[t("button",{onClick:e[0]||(e[0]=E=>v("masuk")),disabled:!r.value||((k=s.value)==null?void 0:k.clock_in),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(h=s.value)!=null&&h.clock_in?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," ABSEN MASUK ",10,ot),t("button",{onClick:e[1]||(e[1]=E=>v("pulang")),disabled:!r.value||((w=s.value)==null?void 0:w.clock_out),class:u(["rounded-xl px-4 py-2 font-semibold shadow",!r.value||(T=s.value)!=null&&T.clock_out?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"])}," ABSEN PULANG ",10,at)]),t("div",lt,[e[10]||(e[10]=t("h3",{class:"text-xl font-semibold"},"Laporan Kehadiran",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Lihat data absensi real-time",-1)),t("button",nt,[U(d(j),{href:l.route("history"),prefetch:"",class:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 text-sm"},{default:A(()=>e[9]||(e[9]=[B(" Lihat Selengkapnya ",-1)])),_:1,__:[9]},8,["href"])])]),t("div",rt,[t("div",null,[t("p",dt,o(((S=c.value)==null?void 0:S.presence)??0),1),e[12]||(e[12]=t("p",null,"Total Kehadiran",-1))]),t("div",null,[t("p",it,o(((I=c.value)==null?void 0:I.absence)??0),1),e[13]||(e[13]=t("p",null,"Total Tidak Hadir",-1))]),t("div",null,[t("p",ut,o(((D=c.value)==null?void 0:D.late)??0),1),e[14]||(e[14]=t("p",null,"Total Terlambat",-1))])])])]}),_:1}))}});export{yt as default};
